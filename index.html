<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CRUD OP | Student Management App</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body class="bg-gray-100 p-6">
    <div class="max-w-4xl mx-auto bg-white shadow-xl rounded-2xl p-6">
      <h1 class="text-2xl font-bold mb-6 text-center text-blue-600">
        <i class="fa-solid fa-user-graduate me-1 text-3xl"></i> Student
        Management
      </h1>

      <form id="studentForm" class="flex flex-col gap-3 mb-6">
        <input type="hidden" id="studentId" />
        <input
          type="text"
          id="name"
          placeholder="Enter Name"
          required
          class="border p-2 rounded w-full border-slate-300"
        />
        <input
          type="email"
          id="email"
          placeholder="Enter Email"
          required
          class="border p-2 rounded w-full border-slate-300"
        />
        <input
          type="text"
          id="course"
          placeholder="Enter Course"
          required
          class="border p-2 rounded w-full border-slate-300"
        />
        <select
          id="gender"
          class="border p-2 rounded w-full border-slate-300"
          required
        >
          <option value="">Select Gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
        <input
          type="url"
          id="image"
          placeholder="Image URL"
          class="border p-2 rounded w-full border-slate-300"
        />
        <button
          type="submit"
          class="bg-blue-500 text-white py-2 rounded hover:bg-blue-600"
        >
          Save Student
        </button>
      </form>

      <div id="studentCards" class="grid sm:grid-cols-3 gap-4"></div>
    </div>

    <script>
      let students = [];
      let editingId = null;

      const form = document.getElementById("studentForm");
      const cardsContainer = document.getElementById("studentCards");

      const defaultImage =
        "https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.png";

      const savedStudents = localStorage.getItem("students");
      if (savedStudents) {
        students = JSON.parse(savedStudents);
        renderCards();
      }

      function renderCards() {
        cardsContainer.innerHTML = "";
        students.forEach((student, index) => {
          cardsContainer.innerHTML += `
          <div class="bg-gray-50 shadow rounded-lg p-4 flex flex-col items-center">
            <img src="${student.image}" class="w-24 h-24 object-cover rounded-full mb-3 border border-slate-50" />
            <h2 class="text-lg font-bold">${student.name}</h2>
            <p class="text-gray-600">${student.email}</p>
            <p class="text-gray-700">Course: ${student.course}</p>
            <p class="text-gray-700">Gender: ${student.gender}</p>
            <div class="mt-3 flex gap-2">
              <button onclick="editStudent(${index})" class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">Edit</button>
              <button onclick="deleteStudent(${index})" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">Delete</button>
            </div>
          </div>
        `;
        });
      }

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const course = document.getElementById("course").value.trim();
        const gender = document.getElementById("gender").value;
        const imageUrl =
          document.getElementById("image").value.trim() || defaultImage;

        const studentData = { name, email, course, gender, image: imageUrl };

        if (editingId === null) {
          students.push(studentData);
        } else {
          students[editingId] = studentData;
          editingId = null;
        }

        localStorage.setItem("students", JSON.stringify(students));

        form.reset();
        renderCards();
      });

      function editStudent(id) {
        const s = students[id];
        document.getElementById("name").value = s.name;
        document.getElementById("email").value = s.email;
        document.getElementById("course").value = s.course;
        document.getElementById("gender").value = s.gender;
        document.getElementById("image").value =
          s.image !== defaultImage ? s.image : "";
        editingId = id;
      }

      function deleteStudent(id) {
        students.splice(id, 1);

        localStorage.setItem("students", JSON.stringify(students));

        renderCards();
      }
    </script>
  </body>
</html>
